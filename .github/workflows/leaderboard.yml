name: 🏆 Weekly Contributor Leaderboard

on:
  schedule:
    - cron: "0 0 * * 0"   # every Sunday midnight UTC
  workflow_dispatch:

jobs:
  leaderboard:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v3

      - name: Generate Leaderboard
        id: leaderboard
        uses: aquasecurity/gh-actions-contrib-leaderboard@v0.1.0
        with:
          github_token: ${{ secrets.GITHUB_TOKEN }}
          since: "7 days ago"

      - name: Post Leaderboard to Discussions
        uses: abhisheknaiidu/gh-discussions-leaderboard@main
        with:
          github_token: ${{ secrets.GITHUB_TOKEN }}
          category: "Announcements"
          title: "🏆 Weekly Contributor Leaderboard"
          body: |
            Here are the top contributors for the past week:

            ${{ steps.leaderboard.outputs.leaderboard }}

            🎉 Thank you everyone for your contributions!
